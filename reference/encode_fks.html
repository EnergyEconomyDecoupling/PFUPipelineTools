<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Encode foreign keys in a data frame to be uploaded — encode_fks • PFUPipelineTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Encode foreign keys in a data frame to be uploaded — encode_fks"><meta name="description" content="In the CL-PFU pipeline,
we allow data frames about to be uploaded
to the database
to have foreign key values (usually strings)
instead of foreign keys (integers)
in foreign key columns.
This function translates the fk values
to fk keys."><meta property="og:description" content="In the CL-PFU pipeline,
we allow data frames about to be uploaded
to the database
to have foreign key values (usually strings)
instead of foreign keys (integers)
in foreign key columns.
This function translates the fk values
to fk keys."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PFUPipelineTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.13</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Encode foreign keys in a data frame to be uploaded</h1>

      <div class="d-none name"><code>encode_fks.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>In the CL-PFU pipeline,
we allow data frames about to be uploaded
to the database
to have foreign key values (usually strings)
instead of foreign keys (integers)
in foreign key columns.
This function translates the fk values
to fk keys.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">encode_fks</span><span class="op">(</span></span>
<span>  <span class="va">.df</span>,</span>
<span>  <span class="va">db_table_name</span>,</span>
<span>  conn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  schema <span class="op">=</span> <span class="fu"><a href="schema_from_conn.html">schema_from_conn</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span>,</span>
<span>  fk_parent_tables <span class="op">=</span> <span class="fu"><a href="get_all_fk_tables.html">get_all_fk_tables</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">conn</span>, schema <span class="op">=</span> <span class="va">schema</span><span class="op">)</span>,</span>
<span>  .child_table <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="dm_fk_colnames.html">dm_fk_colnames</a></span><span class="op">$</span><span class="va">child_table</span>,</span>
<span>  .child_fk_cols <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="dm_fk_colnames.html">dm_fk_colnames</a></span><span class="op">$</span><span class="va">child_fk_cols</span>,</span>
<span>  .parent_table <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="dm_fk_colnames.html">dm_fk_colnames</a></span><span class="op">$</span><span class="va">parent_table</span>,</span>
<span>  .parent_key_cols <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="dm_fk_colnames.html">dm_fk_colnames</a></span><span class="op">$</span><span class="va">parent_key_cols</span>,</span>
<span>  .pk_suffix <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="key_col_info.html">key_col_info</a></span><span class="op">$</span><span class="va">pk_suffix</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--df">.df<a class="anchor" aria-label="anchor" href="#arg--df"></a></dt>
<dd><p>The data frame about to be uploaded.</p></dd>


<dt id="arg-db-table-name">db_table_name<a class="anchor" aria-label="anchor" href="#arg-db-table-name"></a></dt>
<dd><p>The string name of the database table where <code>.df</code> is to be uploaded.</p></dd>


<dt id="arg-conn">conn<a class="anchor" aria-label="anchor" href="#arg-conn"></a></dt>
<dd><p>An optional database connection.
Necessary only for the default values of <code>schema</code> and <code>fk_parent_tables</code>.
Default is <code>NULL</code>.</p></dd>


<dt id="arg-schema">schema<a class="anchor" aria-label="anchor" href="#arg-schema"></a></dt>
<dd><p>The data model (<code>dm</code> object) for the database in <code>conn</code>.
See details.</p></dd>


<dt id="arg-fk-parent-tables">fk_parent_tables<a class="anchor" aria-label="anchor" href="#arg-fk-parent-tables"></a></dt>
<dd><p>A named list of all parent tables
for the foreign keys in <code>db_table_name</code>.
See details.</p></dd>


<dt id="arg--child-table-child-fk-cols-parent-table-parent-key-cols">.child_table, .child_fk_cols, .parent_table, .parent_key_cols<a class="anchor" aria-label="anchor" href="#arg--child-table-child-fk-cols-parent-table-parent-key-cols"></a></dt>
<dd><p>See <code><a href="dm_fk_colnames.html">PFUPipelineTools::dm_fk_colnames</a></code>.</p></dd>


<dt id="arg--pk-suffix">.pk_suffix<a class="anchor" aria-label="anchor" href="#arg--pk-suffix"></a></dt>
<dd><p>See <code><a href="key_col_info.html">PFUPipelineTools::key_col_info</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A version of <code>.df</code> with fk values (often strings)
replaced by fk keys (integers).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>schema</code> is a data model (<code>dm</code> object) for the CL-PFU database.
It can be obtained from calling <code><a href="schema_from_conn.html">schema_from_conn()</a></code>.</p>
<p><code>fk_parent_tables</code> is a named list of tables,
some of which are fk parent tables containing
the mapping between fk values (usually strings)
and fk keys (usually integers)
for <code>db_table_name</code>.
<code>fk_parent_tables</code> is treated as a store from which foreign key tables
are retrieved by name when needed.
An appropriate value for <code>fk_parent_tables</code> can be obtained
from <code><a href="get_all_fk_tables.html">get_all_fk_tables()</a></code>.</p>
<p>If <code>.df</code> contains no foreign key columns,
<code>.df</code> is returned unmodified.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="decode_fks.html">decode_fks()</a></code> for the inverse operation,
albeit for all keys, primary and foreign.</p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

