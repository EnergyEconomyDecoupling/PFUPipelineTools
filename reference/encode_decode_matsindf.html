<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Encode and decode matsindf data frames for storage in a database — encode_decode_matsindf • PFUPipelineTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Encode and decode matsindf data frames for storage in a database — encode_decode_matsindf"><meta name="description" content="The CL-PFU database enables storage of matsindf data frames
by encoding matrix values in triplet format.
These functions perform encoding and decoding
of matsindf data frames.
encode_matsindf() and decode_matsindf() are inverses of each other."><meta property="og:description" content="The CL-PFU database enables storage of matsindf data frames
by encoding matrix values in triplet format.
These functions perform encoding and decoding
of matsindf data frames.
encode_matsindf() and decode_matsindf() are inverses of each other."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PFUPipelineTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.13</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Encode and decode <code>matsindf</code> data frames for storage in a database</h1>

      <div class="d-none name"><code>encode_decode_matsindf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The CL-PFU database enables storage of <code>matsindf</code> data frames
by encoding matrix values in triplet format.
These functions perform encoding and decoding
of <code>matsindf</code> data frames.
<code>encode_matsindf()</code> and <code>decode_matsindf()</code> are inverses of each other.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">decode_matsindf</span><span class="op">(</span></span>
<span>  <span class="va">.encoded</span>,</span>
<span>  <span class="va">index_map</span>,</span>
<span>  <span class="va">rctypes</span>,</span>
<span>  wide_by_matrices <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  matrix_class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"matrix"</span>, <span class="st">"Matrix"</span><span class="op">)</span>,</span>
<span>  matname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">matname</span>,</span>
<span>  matval <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">matval</span>,</span>
<span>  row_index_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_colnames.html">mat_colnames</a></span><span class="op">$</span><span class="va">i</span>,</span>
<span>  col_index_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_colnames.html">mat_colnames</a></span><span class="op">$</span><span class="va">j</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_colnames.html">mat_colnames</a></span><span class="op">$</span><span class="va">value</span>,</span>
<span>  rowtype_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">rowtype</span>,</span>
<span>  coltype_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">coltype</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">encode_matsindf</span><span class="op">(</span></span>
<span>  <span class="va">.matsindf</span>,</span>
<span>  index_map <span class="op">=</span> <span class="fu">magrittr</span><span class="fu">::</span><span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">set_names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">industry_index_map</span>, <span class="va">product_index_map</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/IEATools/reference/row_col_types.html" class="external-link">row_col_types</a></span><span class="op">$</span><span class="va">industry</span>, <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/IEATools/reference/row_col_types.html" class="external-link">row_col_types</a></span><span class="op">$</span><span class="va">product</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="va">industry_index_map</span>,</span>
<span>  <span class="va">product_index_map</span>,</span>
<span>  retain_zero_structure <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  matname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">matname</span>,</span>
<span>  matval <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">matval</span>,</span>
<span>  row_index_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_colnames.html">mat_colnames</a></span><span class="op">$</span><span class="va">i</span>,</span>
<span>  col_index_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_colnames.html">mat_colnames</a></span><span class="op">$</span><span class="va">j</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="fu">PFUPipelineTools</span><span class="fu">::</span><span class="va"><a href="mat_colnames.html">mat_colnames</a></span><span class="op">$</span><span class="va">value</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--encoded">.encoded<a class="anchor" aria-label="anchor" href="#arg--encoded"></a></dt>
<dd><p>A data frame of matrices in triplet form whose matrices are to be decoded.</p></dd>


<dt id="arg-index-map">index_map<a class="anchor" aria-label="anchor" href="#arg-index-map"></a></dt>
<dd><p>A list of two or more index map data frames.
Default is <code>list(Industry = industry_index_map, Product = product_index_map)</code>.</p></dd>


<dt id="arg-rctypes">rctypes<a class="anchor" aria-label="anchor" href="#arg-rctypes"></a></dt>
<dd><p>A data frame of row and column types.</p></dd>


<dt id="arg-wide-by-matrices">wide_by_matrices<a class="anchor" aria-label="anchor" href="#arg-wide-by-matrices"></a></dt>
<dd><p>A boolean that tells whether to
<code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">tidyr::pivot_wider()</a></code> the results.
Default is <code>TRUE</code>.</p></dd>


<dt id="arg-matrix-class">matrix_class<a class="anchor" aria-label="anchor" href="#arg-matrix-class"></a></dt>
<dd><p>The class of matrices to be created by <code>decode_matsindf()</code>.
One of "matrix" (the default
and <code>R</code>'s native matrix class) or
"Matrix" (for sparse matrices).</p></dd>


<dt id="arg-matname">matname<a class="anchor" aria-label="anchor" href="#arg-matname"></a></dt>
<dd><p>The name of the column in <code>.matsindf</code> that contains matrix names.
Default is "matname".</p></dd>


<dt id="arg-matval">matval<a class="anchor" aria-label="anchor" href="#arg-matval"></a></dt>
<dd><p>The name of the column in <code>.matsindf</code> that contains matrix values.
Default is "matval".</p></dd>


<dt id="arg-row-index-colname">row_index_colname<a class="anchor" aria-label="anchor" href="#arg-row-index-colname"></a></dt>
<dd><p>The name of the row index column in <code>.encoded</code>.
Default is "i".</p></dd>


<dt id="arg-col-index-colname">col_index_colname<a class="anchor" aria-label="anchor" href="#arg-col-index-colname"></a></dt>
<dd><p>The name of the column index column in <code>.encoded</code>.
Default is "j".</p></dd>


<dt id="arg-value-colname">value_colname<a class="anchor" aria-label="anchor" href="#arg-value-colname"></a></dt>
<dd><p>The name of the value column.
Default is "value".</p></dd>


<dt id="arg-rowtype-colname-coltype-colname">rowtype_colname, coltype_colname<a class="anchor" aria-label="anchor" href="#arg-rowtype-colname-coltype-colname"></a></dt>
<dd><p>Names of <code>rowtype</code> and <code>coltype</code> columns.</p></dd>


<dt id="arg--matsindf">.matsindf<a class="anchor" aria-label="anchor" href="#arg--matsindf"></a></dt>
<dd><p>A matsindf data frame whose matrices are to be encoded.</p></dd>


<dt id="arg-industry-index-map-product-index-map">industry_index_map, product_index_map<a class="anchor" aria-label="anchor" href="#arg-industry-index-map-product-index-map"></a></dt>
<dd><p>Optional data frames with two columns providing the mapping
between row and column indices and row and column names.
See details.</p></dd>


<dt id="arg-retain-zero-structure">retain_zero_structure<a class="anchor" aria-label="anchor" href="#arg-retain-zero-structure"></a></dt>
<dd><p>A boolean that tells whether to retain
the structure of zero matrices when creating triplets.
Default is <code>FALSE</code>.
See details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For <code>encode_matsindf()</code>,
a version of <code>.matsindf</code> with matrices in triplet form,
appropriate for insertion into a database.
For <code>decode_matsindf()</code>,
a version of <code>.encoded</code> appropriate for in-memory
analysis and calculations.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>index_map</code> must be
an unnamed list of two data frames or
a named list of two or more data frames.</p><ul><li><p>If an unnamed list of exactly two data frames,
each data frame must have only
an integer column and a character column.
The first data frame of <code>index_map</code>
is interpreted as the mapping
between row names and row indices
and
the second data frame of <code>index_map</code>
is interpreted as the mapping
between column names and column indices.</p></li>
<li><p>If a named list of two or more data frames,
the names of <code>index_map</code>
are interpreted as row and column types,
with named data frames applied as the mapping for the
associated row or column type.
For example the data frame named "Industry" would be applied
to the dimension (row or column)
with an "Industry" type.
When both row and column have "Industry" type,
the "Industry" mapping is applied to both.
When sending named data frames in <code>index_map</code>,
matrices to be encoded must have both a row type and a column type.
If an appropriate mapping cannot be found in <code>index_map</code>,
an error is raised.
Both matching data frames must have only
an integer column and
a character column.</p></li>
</ul><p><code>.matsindf</code> can be
(a) wide by matrices,
with matrix names as column names or
(b) tidy, with <code>matname</code> and <code>matval</code> columns.</p>
<p>If <code>.matsindf</code> does not contain any matrix columns,
<code>.matsindf</code> is returned unchanged.</p>
<p>If <code>.encoded</code> does not contain a <code>matname</code> column,
<code>.encoded</code> is returned unchanged.</p>
<p>By default, <code>encode_matsindf()</code> will return
zero-row data frames when
encoding zero matrices.
Set <code>retain_zero_structure = TRUE</code>
to return all entries in zero matrices.</p>
<p>All of <code>matname</code>, <code>row_index_colname</code>,
<code>col_index_colname</code>, and <code>val_colname</code>
must be present in <code>.encoded</code>.
If not, <code>.encoded</code> is returned unmodified.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

