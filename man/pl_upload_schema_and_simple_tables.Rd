% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/schema.R
\name{pl_upload_schema_and_simple_tables}
\alias{pl_upload_schema_and_simple_tables}
\title{Upload a schema and simple tables for the CL-PFU database}
\usage{
pl_upload_schema_and_simple_tables(
  schema,
  simple_tables,
  conn,
  set_not_null_constraints = TRUE,
  drop_db_tables = FALSE,
  .pk_col = PFUPipelineTools::dm_pk_colnames$pk_col
)
}
\arguments{
\item{schema}{A data model (a \code{dm} object).}

\item{simple_tables}{A named list of data frames with the content of
tables in \code{conn}.}

\item{conn}{A \code{DBI} connection to a database.}

\item{set_not_null_constraints}{A boolean that tells whether
\verb{NOT NULL} constraints are set on
foreign key columns in \code{schema}.
Default is \code{TRUE}.}

\item{drop_db_tables}{A boolean that tells whether to delete
existing tables before uploading the new schema.}

\item{.pk_col}{See \code{PFUPipelineTools::dm_pk_colnames}.}
}
\value{
The remote data model
}
\description{
When you need to start over again,
you need to delete database tables, re-define the schema, and upload simple tables.
This function makes it easy.
}
\details{
Optionally (by setting \code{drop_db_tables = TRUE}),
deletes existing tables in the database before uploading
the schema (\code{schema}) and simple tables (\code{simple_tables}).
\code{drop_db_tables} is \code{FALSE} by default.
However, it is unlikely that this function will succeed unless
\code{drop_db_tables} is set \code{TRUE}, because
uploading the data model \code{schema} to \code{conn} will fail
if the tables already exist in the database at \code{conn}.

\code{simple_tables} should not include tables with foreign keys,
because the order for uploading \code{simple_tables} is not guaranteed.
Doing so will avoid uploading a table with a foreign key before
the parent table containing the foreign key values has been uploaded.

\code{set_not_null_constraints} controls setting of
\verb{NOT NULL} constraints for all foreign key columns in \code{schema}.

\code{conn}'s user must have superuser privileges.
}
