% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/schema.R
\name{decode_fks}
\alias{decode_fks}
\title{Decode keys in a downloaded data frame}
\usage{
decode_fks(
  .df,
  db_table_name,
  schema,
  fk_parent_tables,
  .child_table = PFUPipelineTools::dm_fk_colnames$child_table,
  .child_fk_cols = PFUPipelineTools::dm_fk_colnames$child_fk_cols,
  .parent_key_cols = PFUPipelineTools::dm_fk_colnames$parent_key_cols,
  .pk_suffix = PFUPipelineTools::key_col_info$pk_suffix,
  .y_joining_suffix = ".y"
)
}
\arguments{
\item{.df}{The data frame about to be uploaded.}

\item{db_table_name}{The string name of the database table where \code{.df} is to be uploaded.}

\item{schema}{The data model (\code{dm} object) for the database in \code{conn}.
See details.}

\item{fk_parent_tables}{A named list of all parent tables
for the foreign keys in \code{db_table_name}.
See details.}

\item{.child_table, .child_fk_cols, .parent_key_cols}{See \code{PFUPipelineTools::dm_fk_colnames}.}

\item{.pk_suffix}{See \code{PFUPipelineTools::key_col_info}.}

\item{.y_joining_suffix}{The y column name suffix for \code{left_join()}.
Default is ".y".}
}
\value{
A version of \code{.df} with integer keys replaced by key values.
}
\description{
When downloading a data frame from a database,
it is helpful to decode the primary and foreign keys
in the data frame,
i.e. to translate from keys to values.
This function provides that service.
}
\details{
\code{schema} is a data model (\code{dm} object) for the CL-PFU database.
It can be obtained from calling \code{schema_from_conn()}.

\code{fk_parent_tables} is a named list of tables,
some of which are fk parent tables containing
the mapping between fk values (usually strings)
and fk keys (usually integers)
for \code{db_table_name}.
\code{fk_parent_tables} is treated as a store from which foreign key tables
are retrieved by name when needed.
An appropriate value for \code{fk_parent_tables} can be obtained
from \code{get_all_fk_tables()}.
}
