% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{round_double_cols}
\alias{round_double_cols}
\title{Round double-precision columns}
\usage{
round_double_cols(.df, digits = 15)
}
\arguments{
\item{.df}{A data frame whose double-precision columns are to be rounded.}

\item{digits}{The number of digits of precision.
Default is \code{15}, to ensure rows are identical
for \code{\link[=compress_rows]{compress_rows()}}.}
}
\value{
A version of \code{.df} with double-precision columns rounded.
}
\description{
When uploading a data frame to a Postgres database,
there are times when numerical precision
prevents compressing the table with \code{\link[=compress_rows]{compress_rows()}}.
This function rounds all double precision columns
(but not integer columns)
in \code{.df} to the specified precision (\code{digs})
and can be called before upserting \code{.df} to the database.
}
\examples{
data.frame(name = c("pi", "pi+1"),
  # Have to make these integers ("L")
  # so they are left alone.
  million = c(1000000L, 1000001L),
  pi = c(pi, pi+1)) |>
  round_double_cols(digits = 3)
}
