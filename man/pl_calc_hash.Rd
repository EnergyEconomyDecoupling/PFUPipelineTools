% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/storing.R
\name{pl_calc_hash}
\alias{pl_calc_hash}
\title{Calculation pipeline hash}
\usage{
pl_calc_hash(
  .df,
  table_name,
  .table_name_col = PFUPipelineTools::hashed_table_colnames$db_table_name,
  .nested_col = PFUPipelineTools::hashed_table_colnames$nested_col_name,
  .algo = "md5"
)
}
\arguments{
\item{.df}{The data frame to be stored in the database.}

\item{table_name}{The name of the table in which \code{.df} will be stored.}

\item{.table_name_col}{The name of the column of the output that contains \code{table_name} on output.
Default is \code{PFUPipelineTools::hashed_table_colnames$db_table_name}.}

\item{.nested_col}{The name of the column of the output that contains
the has of nested columns.
Default is \code{PFUPipelineTools::hashed_table_colnames$nested_col_name}.}

\item{.algo}{The algorithm for hashing.
Default is "md5".}
}
\value{
A modified version of \code{.df}. See details.
}
\description{
In the CL-PFU database pipeline,
we need the ability to download a
data frame from a hash of the data.
This function calculates the appropriate hash.
}
\details{
The hash has two requirements:
* value changes when the content changes
* provide enough information to retrieve the real data frame

To meet those requirements,
the return value has the following characteristics:
* The first column contains \code{table_name}, the name
of the database table where \code{.df} is stored.
* The second through N-1 columns are invariate columns of \code{.df}.
* The Nth column is a hash of nested data.

This approach enables filtering of \code{table_name} before withdrawing
data at a later time.
}
