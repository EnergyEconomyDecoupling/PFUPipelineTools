% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{inboard_filter_copy}
\alias{inboard_filter_copy}
\title{Copy a country, year subset from one table to another}
\usage{
inboard_filter_copy(
  source,
  dest,
  countries = NULL,
  years = NULL,
  empty_dest = TRUE,
  in_place = FALSE,
  deps = NULL,
  additional_hash_group_cols = PFUPipelineTools::additional_hash_group_cols,
  conn,
  schema = schema_from_conn(conn),
  fk_parent_tables = get_all_fk_tables(conn = conn, schema = schema),
  country = IEATools::iea_cols$country,
  year = IEATools::iea_cols$year,
  pk_suffix = PFUPipelineTools::key_col_info$pk_suffix
)
}
\arguments{
\item{source}{A string identifying the source table.}

\item{dest}{A string identifying the destination table.}

\item{countries}{Countries to keep.}

\item{years}{Years to keep.}

\item{empty_dest}{A boolean that tells whether to empty the destination table before copying.
Default is \code{TRUE}.}

\item{in_place}{A boolean that tells whether to make the changes in the remote
database at \code{conn}.}

\item{conn}{A database connection.}

\item{country}{The name of the country column in \code{source} and \code{dest}.
Default is \code{IEATools::iea_cols$country}.}

\item{year}{The name of the year column in \code{source} and \code{dest}.
Default is \code{IEATools::iea_cols$year}.}

\item{dependencies}{Other objects (often targets) upon which the inboard copy depends.
The default is \code{NULL}.
See details.}
}
\value{
A hash of the destination data frame
created by \code{\link[=pl_upsert]{pl_upsert()}}.
}
\description{
Inboard copying of tables is much faster than round-tripping
data from the database to the local machine and back.
This function does an inboard filter and copy
from \code{source} to \code{dest} in \code{conn},
optionally emptying \code{dest} first.
}
\details{
The \code{source} and \code{dest} tables should have identical columns.

The \code{dependencies} argument can be a vector of other objects
upon which the desired inboard copy depends.
Typically, the target that makes \code{source} should be given in \code{dependencies},
for unless the target that makes \code{source} completes,
the inboard filter copy will fail.
\code{dependencies} is ignored internally.
}
